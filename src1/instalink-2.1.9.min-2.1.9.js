/* 
	InstaLink
	Version: 2.1.6
	Release date: Mon Mar 26 2018
	
	elfsight.com
	
	Copyright (c) 2018 Elfsight, LLC. ALL RIGHTS RESERVED
 */

!function(d,o,l){var a=0;o.Array.prototype.filter||(o.Array.prototype.filter=function(e){"use strict";if(this===l||null===this)throw new o.TypeError;var t=o.Object(this),a=t.length>>>0;if("function"!=typeof e)throw new o.TypeError;for(var r=[],i=2<=arguments.length?arguments[1]:void 0,n=0;n<a;n++)if(n in t){var s=t[n];e.call(i,s,n,t)&&r.push(s)}return r});function r(e,t,a,r,i){this._clientId=e,this._accessToken=t,this._lastPagination={},this._initialPagination={},this._loading=!1,this._cacheMediaTime=a,this._alternativeApiUrl=r,this._cachedProfile=null,this._isSandbox=i}function i(e,t){var a=this;a._id=e,a._structure={},a._structure.$root=d(t),a._structure.style=null,a._params={},a._source={},a._data={},a._data.feedCache=[],a._curBreakpoint=null,a._grid=null,a._prevGrid=null,a._state="loading",a._properties={},a._curLangData=null,a._api=null,a._sizesHash=null,a._oldSizesHash=null,a._params.accessToken&&(a._atUserId=a._params.accessToken.split(".")[0]),a._defineParams(),a._atUserId=null,a._isSandbox=!a._params.api&&a._params.accessToken&&!a._params.username,a._defineSource(),a._defineLanguage(),a._api=new r(a._params.clientId,a._params.accessToken,parseInt(a._params.cacheMediaTime,10),a._params.api,a._isSandbox)}function e(){d("[data-il]").each(function(e,t){i.init(a++,t).run()})}(r.prototype=function(){})._apiUrl="https://api.instagram.com/v1",r.prototype.getApiUrl=function(){return this._alternativeApiUrl?this._alternativeApiUrl.replace(/\/*$/,"")+"/":r.prototype._apiUrl},r.prototype.isAlternativeApi=function(){return this.getApiUrl()!=r.prototype._apiUrl},r.prototype.hasNextPage=function(t){var a=this;return d.isArray(t)||(t=[t]),o.Object.keys(this._lastPagination).some(function(e){return!!~t.indexOf(e)&&a._lastPagination[e]&&a._lastPagination[e].next_url})},r.prototype._hasInitialPage=function(t){var a=this;return d.isArray(t)||(t=[t]),o.Object.keys(this._initialPagination).some(function(e){return!!~t.indexOf(e)&&a._initialPagination[e]&&a._initialPagination[e].next_url})},r.prototype.resetPagination=function(e){var t=this;d.isArray(e)||(e=[e]),d.each(e,function(e){t._initialPagination[e]&&(t._lastPagination[e]=t._initialPagination[e])})},r.prototype.isLoading=function(){return this._loading},r.prototype.get=function(a,e,t){var r=null,i=null,n=null,s=this;return t=t===l||!!t,e=d.isPlainObject(e)?e:{},e=d.extend(!1,{},s.parseQuery(a.replace(/^[^\?]+/,"")),e),s.isAlternativeApi()?(e.path="/v1"+a.replace("/v1","").replace(/\?[^\?]+$/,""),a=s.getApiUrl()+"?"+d.param(e)):(this._clientId&&(e.client_id=this._clientId),this._accessToken&&(e.access_token=this._accessToken),a=(t?s.getApiUrl():"")+a.replace(/\?[^\?]+$/,"")+"?"+d.param(e)),i=d.Deferred(),r=this.getCached(a)||d.ajax({url:a,dataType:"jsonp"}),n={originalPromise:r},r.done(function(e,t){200!==(n.originalResponseData=e).meta.code?(d.extend(!0,n,{meta:e.meta}),i.reject(n)):(d.extend(!0,n,{data:e.data}),t&&s.cache(a,e),i.resolve(n))}),i.promise()},r.prototype.parseQuery=function(e){return(e||document.location.search).replace(/(^\?)/,"").split("&").map(function(e){return this[(e=e.split("="))[0]]=e[1],this}.bind({}))[0]},r.prototype.getCached=function(e){var t,a=d.Deferred();return o.localStorage?!(t=(t=localStorage.getItem(e))?JSON.parse(t):null)||parseInt(t.duration,10)!==this._cacheMediaTime||t.expired<Date.now()/1e3?(localStorage.removeItem(e),null):(setTimeout(function(){a.resolve(t.value)},50),a.promise()):null},r.prototype.cache=function(e,t){var a=this._cacheMediaTime;if(a)try{localStorage.setItem(e,JSON.stringify({duration:a,expired:Date.now()/1e3+a,value:t}))}catch(e){localStorage.clear()}},r.prototype.getUser=function(t){var a=null,r=this;return a=d.Deferred(),t=d.trim(t),r.isAlternativeApi()?r.get("/users/"+t+"/").done(function(e){r._cachedProfile=e.data,a.resolve({data:[e.data]})}).fail(function(e){a.reject(e)}):r.get("/users/search",{q:t}).done(function(e){e.data=e.data.filter(function(e){return e.username.toLowerCase()===t.toLowerCase()}),a.resolve(e)}).fail(function(e){a.reject(e)}),a.promise()},r.prototype.getProfile=function(e){e=o.parseInt(e,10);var t=d.Deferred();return this.isAlternativeApi()?(t.resolve({data:this._cachedProfile}),t.promise()):this.get("/users/"+(this._isSandbox?"self":e))},r.prototype.getRecentUserMedia=function(a,r,i){var n=null,s=this;return n=d.Deferred(),i=o.parseInt(i,10),this._isSandbox&&(a="self"),this.get("/users/"+a+"/media/recent",{count:r?33:i}).done(function(e){var t;r&&d.isArray(r)&&(r=r.filter(function(e){return e.toLowerCase()}),e.data=e.data.filter(function(e){return e.tags&&e.tags.some(function(e){return!!~r.indexOf(e.toLowerCase())})})),t=e.data,s._fetchMedia(e,n,t,i,r,null,a)}).fail(function(e){n.reject(e)}),n},r.prototype.getRecentTagMedia=function(a,r,i){var n=null,s=this;return n=d.Deferred(),a=d.trim(a),i=o.parseInt(i,10),this.get("/tags/"+a+"/media/recent",{count:i}).done(function(e){var t;r&&d.isArray(r)&&(e.data=e.data.filter(function(e){return!~r.indexOf(e.user.id)})),t=e.data,s._fetchMedia(e,n,t,i,null,r,a)}).fail(function(e){n.reject(e)}),n},r.prototype.getRecentTagsMedia=function(e,a,i){var t=null,r=[],n=this;return 1===e.length?n.getRecentTagMedia(e[0],a,i):(e=(e=e.map(function(e){return d.trim(e)})).filter(function(e){return!!e}),t=d.Deferred(),d.each(e,function(e,t){r.push(n.getRecentTagMedia(t,a,i))}),d.when.apply(d,r).done(function(){var a=[],r=null;d.each(arguments,function(e,t){r||(r=t),t&&t.data&&(a=a.concat(t.data))}),a=(a=(a=a.filter(function(t){return!a.some(function(e){return e!==t&&t.id===e.id})})).sort(function(e,t){return e.created_time<t.created_time?1:e.created_time>t.created_time?-1:0})).slice(0,i),r&&r.data&&(r.data=a),t.resolve(r)}).fail(function(e){t.reject(e)}),t.promise())},r.prototype.loadNextPage=function(a,r,i,n){var s=[],o=null,l=this;return o=d.Deferred(),this._loading=!0,l.hasNextPage(a)?1===(a=d.isArray(a)?a:[a]).length?this.get(l._lastPagination[a[0]].next_url,{count:r||i?33:n},!1).done(function(e){var t;r&&d.isArray(r)&&(e.data=e.data.filter(function(e){return e.tags&&e.tags.some(function(e){return!!~r.indexOf(e)})})),i&&d.isArray(i)&&(e.data=e.data.filter(function(e){return!~i.indexOf(e.user.id)})),t=e.data,l._fetchMedia(e,o,t,n,r,i,a)}).fail(function(e){o.reject(e)}):(d.each(a,function(e,a){var t;l.hasNextPage(a)&&(t=d.Deferred(),l.get(l._lastPagination[a].next_url,{count:n},!1).done(function(e){var t;t=e.data,l._fetchMedia(e,o,t,n,null,i,a)}).fail(function(e){o.reject(e)}),s.push(t))}),d.when.apply(d,s).done(function(){var a=[],r=null;d.each(arguments,function(e,t){r||(r=t),t&&t.data&&(a=a.concat(t.data))}),a=(a=(a=a.filter(function(t){return!a.some(function(e){return e!==t&&t.id===e.id})})).sort(function(e,t){return e.created_time<t.created_time?1:e.created_time>t.created_time?-1:0})).slice(0,n),r.data=a,o.resolve(r)}).fail(function(e){o.reject(e)})):o.reject(),o.always(function(){l._loading=!1}),o.promise()},r.prototype._fetchMedia=function(e,t,a,r,i,n,s){var o=this;e&&e.originalResponseData&&(r-=e.data.length+1,s&&(o._lastPagination[s]=e.originalResponseData.pagination),s&&!o._hasInitialPage(s)&&(o._initialPagination[s]=e.originalResponseData.pagination),0<r&&e.originalResponseData.pagination&&e.originalResponseData.pagination.next_url?o.get(e.originalResponseData.pagination.next_url,{count:i||n?33:r},!1).done(function(e){i&&d.isArray(i)&&(e.data=e.data.filter(function(e){return e.tags&&e.tags.some(function(e){return!!~i.indexOf(e)})})),n&&d.isArray(n)&&(e.data=e.data.filter(function(e){return!~n.indexOf(e.user.id)})),a=a.concat(e.data),o._fetchMedia(e,t,a,r,i,n,s)}).fail(function(e){t.reject(e)}):(e.data=a,t.resolve(e)))},i.prototype=function(){},i.REGEX_HASHTAG=/[,\s]+/i,i.VERSION="2.1.6",i.prototype._defaultParams={api:null,clientId:"",accessToken:"",username:"",hashtag:"",lang:"en",bgColor:"#285989",contentBgColor:"#f8f8f8",fontColor:"#ffffff",width:"270px",height:"350px",imageSize:"medium",scroll:"false",ban:"",showHeading:"true",cacheMediaTime:0},i.prototype._templates={css:"#instaLink_{$id} {width: {$width}; height: {$height}; } #instaLink_{$id}, #instaLink_{$id} .instalink-feed-wrapper { background: {$contentBgColor} } #instaLink_{$id} .instalink-header, #instaLink_{$id} a.instalink-panel-subscribe {background-color: {$bgColor}; } #instaLink_{$id} .instalink-header-name a, #instaLink_{$id} .instalink-header-name, #instaLink_{$id} a.instalink-panel-subscribe {color: {$fontColor}; } #instaLink_{$id} .instalink-feed-post {width: {$postWidth}; height: {$postHeight}; } #instaLink_{$id} .instalink-feed-post span {width: {$postImgWidth}; height: {$postImgHeight}; margin-top: {$postImgMTop}; margin-left: {$postImgMLeft} } #instaLink_{$id} .instalink-feed-loader { width: {$width}; }",cap:'<div class="instalink-cap"></div>',error:'<div class="instalink-alert">An error occurred. See console for the details.</div>',content:'<div class="instalink-content"></div>',headerUser:'<a class="instalink-header" href="{$url}" target="_blank"> <img class="instalink-header-pic" src="{$pic}" alt="{$name}"/> <span class="instalink-header-name">{$name}</span> <span class="instalink-header-logo"></span> </a>',headerTag:'<div class="instalink-header"> <span class="instalink-header-name">{$name}</span> <span class="instalink-header-logo"></span> </div>',panel:'<div class="instalink-panel"><span class="instalink-panel-posts instalink-panel-counter"> <i class="instalink-panel-counter-value">{$posts}</i><span class="instalink-panel-counter-label">{~posts}</span> </span><span class="instalink-panel-subsribers instalink-panel-counter"> <i class="instalink-panel-counter-value">{$followers}</i> <span class="instalink-panel-counter-label">{~followers}</span> </span> <span class="instalink-panel-following instalink-panel-counter"> <i class="instalink-panel-counter-value">{$following}</i> <span class="instalink-panel-counter-label">{~following}</span> </span> <a class="instalink-panel-subscribe" href="{$url}" target="_blank">{~follow}</a> </div>',scrollbar:'<div class="instalink-scrollbar"></div>',scrollbarSlider:'<div class="instalink-scrollbar-slider"></div>',feedWrapper:'<div class="instalink-feed-wrapper">',feedInner:'<div class="instalink-feed-inner"></div>',feedContainer:'<div class="instalink-feed-container"></div>',feedEmpty:'<div class="instalink-feed-empty"><span class="instalink-feed-empty-text">There are no images yet.</span></div>',feed:'<div class="instalink-feed"></div>',feedLoader:'<div class="instalink-feed-loader"></div>',post:'<a href="{$url}" target="_blank" class="instalink-feed-post"> <span><img src="{$pic}" alt="" data-pic_orig="{$pic_orig}"></span> </a>',consoleError:"[#InstaLink_{$id}: {$message}]"},i.prototype._breakpoints={small:[{minWidth:1970,rowLength:21},{minWidth:1870,rowLength:21},{minWidth:1870,rowLength:20},{minWidth:1770,rowLength:19},{minWidth:1670,rowLength:18},{minWidth:1570,rowLength:17},{minWidth:1470,rowLength:16},{minWidth:1370,rowLength:15},{minWidth:1270,rowLength:14},{minWidth:1170,rowLength:13},{minWidth:1070,rowLength:12},{minWidth:970,rowLength:11},{minWidth:870,rowLength:10},{minWidth:770,rowLength:9},{minWidth:670,rowLength:8},{minWidth:570,rowLength:7},{minWidth:470,rowLength:6},{minWidth:370,rowLength:5},{minWidth:90,rowLength:4}],medium:[{minWidth:1980,rowLength:16},{minWidth:1850,rowLength:15},{minWidth:1720,rowLength:14},{minWidth:1590,rowLength:13},{minWidth:1460,rowLength:12},{minWidth:1330,rowLength:11},{minWidth:1200,rowLength:10},{minWidth:1070,rowLength:9},{minWidth:940,rowLength:8},{minWidth:810,rowLength:7},{minWidth:680,rowLength:6},{minWidth:550,rowLength:5},{minWidth:520,rowLength:5},{minWidth:390,rowLength:4},{minWidth:90,rowLength:3}],large:[{minWidth:1920,rowLength:8},{minWidth:1660,rowLength:8},{minWidth:1400,rowLength:7},{minWidth:1140,rowLength:6},{minWidth:980,rowLength:5},{minWidth:720,rowLength:4},{minWidth:460,rowLength:3},{minWidth:90,rowLength:2}],xlarge:[{minWidth:2200,rowLength:6},{minWidth:1800,rowLength:5},{minWidth:1400,rowLength:4},{minWidth:1200,rowLength:3},{minWidth:600,rowLength:2},{minWidth:90,rowLength:1}]},i.prototype._i18n={ru:{posts:"публикации",followers:"подписчики",following:"подписки",follow:"Подписаться"},en:{posts:"posts",followers:"followers",following:"following",follow:"Follow"},de:{posts:"beiträge",followers:"abonnenten",following:"abonnement",follow:"Folgen"},nl:{posts:"berichten",followers:"volgers",following:"volgend",follow:"Volgen"},es:{posts:"publicaciones",followers:"seguidores",following:"seguidos",follow:"Seguir"},fr:{posts:"publications",followers:"abonnés",following:"abonnement",follow:"S'abonner"},pl:{posts:"posty",followers:"obserwujący",following:"obserwujacych",follow:"Obserwuj"},sv:{posts:"inlägg",followers:"följare",following:"följer",follow:"Följ"},"pt-BR":{posts:"publicações",followers:"seguidores",following:"seguidos",follow:"Seguir"},tr:{posts:"gönderiler",followers:"takipçiler",following:"takip edilen",follow:"Takip et"},"zh-HK":{posts:"帖子",followers:"天注者",following:"天注",follow:"天注"},ko:{posts:"게시물",followers:"팔로워",following:"팔로잉",follow:"팔로우"},ja:{posts:"投稿",followers:"フォロワー",following:"フォロワー中",follow:"フォローする"},id:{posts:"kiriman",followers:"pengikut",following:"mengikuti",follow:"Ikuti"},he:{rtl:!0,posts:"כתבות",followers:"עוקבים",following:"עוקב",follow:"עקוב"},it:{posts:"post",followers:"seguaci",following:"segui già",follow:"segui"}},i.init=function(e,t){return new i(e,t)},i.formatNumber=function(e){var t=null,a=null;return e<1e3?e:(1e6<e?(a=e/1e6,t="m"):1e3<e&&(a=e/1e3,t="k"),o.parseInt(a,10)!==a&&(a=a.toFixed(1)),a+t)},i.prototype._defineLanguage=function(){this._curLangData=this._i18n[this._params.lang]||this._i18n.en},i.prototype._defineParams=function(){var r=this;d.each(r._defaultParams,function(e,t){var a;a="data-il-"+e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}),r._params[e]=d.trim(r._structure.$root.attr(a))||t}),r._properties.scroll="true"===r._params.scroll},i.prototype._defineSource=function(){var e=null,t=null,a=this;a._params.source&&!a._params.username&&(e=a._params.source.substr(0,1),~["@","#"].indexOf(e)?(t=a._params.source.substr(1),"@"===e?a._params.username=t:a._params.hashtag=[t]):a._params.username=a._params.source),a._params.username||a._isSandbox?(a._source.type="user",a._source.name=a._params.username,a._params.hashtag&&(a._source.hashfilter=a._params.hashtag.split(i.REGEX_HASHTAG))):a._params.hashtag&&(a._source.type="tag",a._source.tags=a._params.hashtag.split(i.REGEX_HASHTAG))},i.prototype._updateStyles=function(){var e=null,t=this;t._structure.$style||(t._structure.$style=d("<style>",{type:"text/css"}),t._structure.$root.after(t._structure.$style)),t._grid&&(e=t._grid.cellWidth>t._grid.cellHeight?.9*t._grid.cellHeight:.9*t._grid.cellWidth,e=o.parseInt(e,10));var a=t._params.width;a&&parseInt(a,10)==a&&(a+="px");var r=t._params.height;r&&parseInt(r,10)==r&&(r+="px"),t._structure.$style.html(t._compileTemplate("css",{id:t._id,width:a,height:r,bgColor:t._params.bgColor,contentBgColor:t._params.contentBgColor,fontColor:t._params.fontColor,postWidth:t._grid?t._grid.cellWidth+"px":"initial",postHeight:t._grid?t._grid.cellHeight+"px":"initial",postImgWidth:t._grid?e+"px":"initial",postImgHeight:t._grid?e+"px":"initial",postImgMTop:t._grid?o.parseInt(-e/2,10)+"px":0,postImgMLeft:t._grid?o.parseInt(-e/2,10)+"px":0}))},i.prototype._compileTemplate=function(e,a){var t=null,r=null,i=this;return(t=i._templates[e])&&"[object String]"===o.Object.prototype.toString.call(t)?(r=d.isPlainObject(a)?t.replace(/\{\$([\w\W]+?)}/g,function(e,t){return a[t]}):t,d.isPlainObject(i._curLangData)&&(r=r.replace(/\{~([\w\W]+?)}/g,function(e,t){return i._curLangData[t]})),r):null},i.prototype._setState=function(e){~["loading","ready","error"].indexOf(e)&&(this._state=e,this._structure.$root.removeClass("instalink-ready instalink-loading instalink-error").addClass("instalink-"+e))},i.prototype._prepare=function(){var e=this;"false"===e._params.showHeading&&e._structure.$root.addClass("instalink-hide-heading"),e._structure.$root.addClass("instalink").addClass("instalink-"+e._source.type).addClass("instalink-image-size-"+e._params.imageSize).attr("id","instaLink_"+e._id),e._properties.scroll&&e._structure.$root.addClass("instalink-scroll"),e._structure.$root.empty(),e._structure.$cap=d(e._templates.cap),e._structure.$root.append(e._structure.$cap),e._structure.$error=d(e._templates.error),e._structure.$root.append(e._structure.$error),e._structure.$content=d(e._templates.content),e._structure.$root.append(e._structure.$content),e._structure.$feedWrapper=d(e._templates.feedWrapper),e._structure.$content.append(e._structure.$feedWrapper),e._setState(e._state),e._defineBreakpoint(),e._defineGrid(),e._updateStyles(),e._adjust()},i.prototype._defineBreakpoint=function(){var e,a=null,t=null,r=this;e=r._undusk(),r._breakpoints.hasOwnProperty(r._params.imageSize)&&(t=r._breakpoints[r._params.imageSize]),t&&t.length&&(d.each(t,function(e,t){if(a)return!1;r._structure.$feedWrapper.innerWidth()>t.minWidth&&(a=t)}),a||(a=t[0])),r._curBreakpoint=a,e()},i.prototype._defineGrid=function(){var e,t={},a=this;a._curBreakpoint&&(e=a._undusk(),a._prevGrid=a._grid,t.width=a._structure.$feedWrapper.innerWidth(),t.height=a._structure.$feedWrapper.innerHeight(),t.columnsCount=a._curBreakpoint.rowLength,t.cellWidth=o.Math.floor(t.width/t.columnsCount),t.rowsCount=o.Math.round(t.height/t.cellWidth),0===t.rowsCount&&(t.rowsCount=1),t.cellHeight=Math.floor(t.height/t.rowsCount),t.rowsCountDefault=t.rowsCount,a._properties.scroll&&(t.rowsCount+=2),t.cellsCount=t.columnsCount*t.rowsCount,t.cellsCountDefault=t.columnsCount*t.rowsCountDefault,a._grid=t,e())},i.prototype._undusk=function(){return $hiddenElements=this._structure.$root.parents().filter(function(){return"none"===d(this).css("display")}),$hiddenElements.css({display:"block",visibility:"hidden"}),function(){$hiddenElements.css({display:"none",visibility:""})}},i.prototype._loadFeed=function(){var e,t=null,a=this;return t=d.Deferred(),a._grid?!a._properties.scroll&&a._data.feedCache&&a._data.feedCache.length>=a._grid.cellsCount?(a._data.feed=a._data.feedCache.slice(0,a._grid.cellsCount),t.resolve()):(a._setState("loading"),(a._isSandbox||"user"===a._source.type)&&a._data.profile&&a._data.profile.id?(e=a._api.isAlternativeApi()?a._data.profile.username:a._data.profile.id,a._api.getRecentUserMedia(e,a._source.hashfilter,a._grid.cellsCount).done(function(e){e&&e.data&&(a._data.feed=e.data,e.data.length>a._data.feedCache.length&&(a._data.feedCache=e.data),a._setState("ready"),t.resolve())}).fail(function(e){e&&e.meta&&e.meta.error_message&&a._log(e.meta.error_type+" | "+e.meta.error_message),t.reject()})):"tag"===a._source.type?a._api.getRecentTagsMedia(a._source.tags,a._source.banlist,a._grid.cellsCount).done(function(e){e&&e.data&&(a._data.feed=e.data,e.data.length>a._data.feedCache.length&&(a._data.feedCache=e.data),a._setState("ready"),t.resolve())}).fail(function(e){e.meta._additional&&(e.meta.error_message+=" | "+e.meta._additional),e&&e.meta&&e.meta.error_message&&a._log(e.meta.error_type+" | "+e.meta.error_message),t.reject()}):t.reject()):t.reject(),t.promise()},i.prototype._setListeners=function(){var e=this;d(o).on("resize.instaLink-"+e._id,function(){e._adjust()}),d(o).on("load.instaLink-"+e._id,function(){e._adjust()}),e._structure.$feedContainer.on("scroll",function(){e._scroll()})},i.prototype._scroll=function(){var t,a,e,r=null,i=this;i._properties.scroll&&(e="tag"===i._source.type?i._source.tags:i._api.isAlternativeApi()?i._data.profile.username:i._data.profile.id,t=i._structure.$feedInner.innerHeight()-i._structure.$feedContainer.innerHeight(),a=i._structure.$feedContainer.scrollTop(),i._showScrollbar(a,t),r=i._params.imageSize.toLowerCase&&"xlarge"===i._params.imageSize.toLowerCase()?0:i._grid.cellHeight,t-a<=r&&i._api.hasNextPage(e)&&!i._api.isLoading()&&i._api.loadNextPage(e,i._source.hashfilter,i._source.banlist,i._grid.cellsCount).done(function(e){i._appendFeed(e.data),i._showScrollbar(a,t)}).fail(function(e){e&&e.meta&&e.meta.error_message&&i._log(e.meta.error_type+" | "+e.meta.error_message)}))},i.prototype._adjustMedia=function(e){e.removeClass("instalink-feed-post-landscape instalink-feed-post-portrait instalink-feed-post-square");var t=e.find("img"),a=t.width()/t.height();1<a?e.addClass("instalink-feed-post-landscape"):a<1?e.addClass("instalink-feed-post-portrait"):e.addClass("instalink-feed-post-square")},i.prototype._adjust=function(e){var t,a=this;a._sizesHash=a._structure.$root.width()+"."+a._structure.$root.height(),a._defineBreakpoint(),a._defineGrid(),a._updateStyles(),t=a._structure.$root.innerWidth(),e?a._adjustMedia(e):(a._structure.$root.removeClass("instalink-small instalink-tiny instalink-medium instalink-large"),399<t?a._structure.$root.addClass("instalink-large"):299<t?a._structure.$root.addClass("instalink-medium"):t<=209?a._structure.$root.addClass("instalink-tiny"):t<=264&&a._structure.$root.addClass("instalink-small"),a._structure.$feed&&a._structure.$feed.find(".instalink-feed-post").removeClass("instalink-feed-post-landscape instalink-feed-post-portrait instalink-feed-post-square").each(function(e,t){var a=d(t),r=a.find("img"),i=r.width()/r.height();1<i?a.addClass("instalink-feed-post-landscape"):i<1?a.addClass("instalink-feed-post-portrait"):a.addClass("instalink-feed-post-square")}),a._prevGrid&&a._prevGrid.cellsCount===a._grid.cellsCount?a._sizesHash!==a._oldSizesHash&&a.updateFeed():a._loadFeed().done(function(){a.updateFeed()}),a._oldSizesHash=a._sizesHash)},i.prototype._showScrollbar=function(e,t){var a,r,i=this;!i._structure.$feedContainer||i._data.feed.length<i._grid.cellsCountDefault||(i._structure.$scrollbar||(i._structure.$scrollbar=d(i._compileTemplate("scrollbar")),i._structure.$scrollbarSlider=d(i._compileTemplate("scrollbarSlider")),i._structure.$scrollbar.append(i._structure.$scrollbarSlider),i._structure.$feedWrapper.append(i._structure.$scrollbar)),a=i._structure.$feedWrapper.innerHeight()/i._structure.$feedInner.innerHeight()*i._structure.$feedWrapper.innerHeight(),r=e&&t?e/t*(i._structure.$feedWrapper.innerHeight()-a):0,i._structure.$scrollbarSlider.css({height:a,transform:"translate(0, "+r+"px)"}),i._structure.$scrollbar.addClass("visible"),i._scrollbarTimer||o.clearTimeout(i._scrollbarTimer),i._scrollbarTimer=o.setTimeout(function(){i._structure.$scrollbar.removeClass("visible")},700))},i.prototype._log=function(e,t){var a;o.console&&"[object Function]"===o.Object.prototype.toString.call(o.console.log)&&((t=t===l||!!t)&&this._setState("error"),a=this._compileTemplate("consoleError",{id:this._id,message:e}),o.console.log(a))},i.prototype._mutateBanlist=function(){var a=this,r=d.Deferred();return a._params.ban?(a._source.banlist=a._params.ban.split(i.REGEX_HASHTAG),a._source.banlist.map(function(e,t){a._api.getUser(e).done(function(e){return a._source.banlist[t]=e.data[0].id,r.resolve(e)})}),r.promise()):r.resolve()},i.prototype.run=function(){var a=this;a._updateStyles(),a._prepare(),a._mutateBanlist().done(function(){a._rtl&&a._structure.$root.addClass("instalink-rtl"),a._isSandbox?a._api.getProfile().done(function(e){a._data.profile=e.data,a._loadFeed().done(function(){a.updateContent()&&(a._setState("ready"),a._setListeners(),a._adjust())})}).fail(function(e){e&&e.meta&&e.meta.error_message&&a._log(e.meta.error_type+" | "+e.meta.error_message)}):"user"===a._source.type?a._api.getUser(a._source.name).done(function(t){t.data.length?a._api.getProfile(t.data[0].id).done(function(e){e.data.id=t.data[0].id,a._data.profile=e.data,a._loadFeed().done(function(){a.updateContent()&&(a._setState("ready"),a._setListeners(),a._adjust())})}).fail(function(e){e&&e.meta&&e.meta.error_message&&a._log(e.meta.error_type+" | "+e.meta.error_message)}):a._log("User @"+a._source.name+" is not found.")}).fail(function(e){e&&e.meta&&e.meta.error_message&&(e.meta._additional&&(e.meta.error_message+=" | "+e.meta._additional),a._log(e.meta.error_type+" | "+e.meta.error_message))}):"tag"===a._source.type&&a._loadFeed().done(function(){a.updateContent()&&(a._setState("ready"),a._setListeners(),a._adjust())})})},i.prototype.updateContent=function(){var e=this;return!(!e._data.feed||!e._structure.$content)&&(e._structure.$content.html(""),e._structure.$feedContainer=d(e._templates.feedContainer),e._structure.$feedInner=d(e._templates.feedInner),e._structure.$feed=d(e._templates.feed),e._structure.$feedInner.append(e._structure.$feed),e._structure.$feedContainer.append(e._structure.$feedInner),e._structure.$feedWrapper.append(e._structure.$feedContainer),e._structure.$content.append(e._structure.$feedWrapper),e._properties.scroll&&(e._structure.$feedLoader=d(e._templates.feedLoader),e._structure.$feedInner.append(e._structure.$feedLoader)),"false"!==e._params.showHeading&&((e._isSandbox||"user"===e._source.type)&&e._data.profile?(e._structure.$header=d(e._compileTemplate("headerUser",{name:e._data.profile.username,url:"https://instagram.com/"+e._data.profile.username+"/",pic:e._data.profile.profile_picture})),e._structure.$content.prepend(e._structure.$header),e._structure.$panel=d(e._compileTemplate("panel",{posts:i.formatNumber(e._data.profile.counts.media),followers:i.formatNumber(e._data.profile.counts.followed_by),following:i.formatNumber(e._data.profile.counts.follows),url:"https://instagram.com/"+e._data.profile.username+"/"})),e._structure.$header.after(e._structure.$panel)):"tag"===e._source.type&&(e._structure.$header=d(e._compileTemplate("headerTag",{name:e._source.tags.map(function(e){return'<a target="_blank" href="https://www.instagram.com/explore/tags/'+e+'/">#'+e+"</a>"}).join(", ")})),e._structure.$content.prepend(e._structure.$header))),e.updateFeed())},i.prototype.updateFeed=function(e){var t,i=this;return!(!i._data.feed||!i._structure.$feed)&&(t="tag"===i._source.type?i._source.tags:i._api.isAlternativeApi()?i._data.profile.username:i._data.profile.id,i._api.resetPagination(t),i._api.hasNextPage(t)?i._structure.$root.addClass("instalink-has-pages"):i._structure.$root.removeClass("instalink-has-pages"),i._structure.$feed.html(""),d.each(i._data.feed,function(e,t){var a=null,r=null;r=306<i._grid.cellWidth?t.images.standard_resolution.url:150<i._grid.cellWidth?t.images.low_resolution.url:t.images.thumbnail.url,a=d(i._compileTemplate("post",{url:t.link,pic:r,pic_orig:t.images.__original?t.images.__original.url:t.images.standard_resolution.url})),"video"===t.type&&a.addClass("instalink-feed-post-video"),i._structure.$feed.append(a)}),0===i._data.feed.length&&i._structure.$feedContainer.append(i._templates.feedEmpty),i._properties.scroll&&i._showScrollbar(),d("img",i._structure.$feed).unbind("load.instaLink-"+i._id).one("load.instaLink-"+i._id,function(){var e=d(this),t=e.closest(".instalink-feed-post");e.closest(".instalink-feed-post").addClass("instalink-feed-post-loaded"),i._adjust(t)}).one("error",function(){var e=this.dataset.pic_orig;d(this).attr("src",e)}).each(function(){this.complete&&d(this).load()}),e||i._structure.$content.trigger("instalinkReady"),!0)},i.prototype._appendFeed=function(e){var t,i=this;return!(!e||!i._structure.$feed)&&(t="tag"===i._source.type?i._source.tags:i._api.isAlternativeApi()?i._data.profile.username:i._data.profile.id,i._api.hasNextPage(t)?i._structure.$root.addClass("instalink-has-pages"):i._structure.$root.removeClass("instalink-has-pages"),d.each(e,function(e,t){var a=null,r=null;r=306<i._grid.cellWidth?t.images.standard_resolution.url:150<i._grid.cellWidth?t.images.low_resolution.url:t.images.thumbnail.url,a=d(i._compileTemplate("post",{url:t.link,pic:r,pic_orig:t.images.__original?t.images.__original.url:t.images.standard_resolution.url})),"video"===t.type&&a.addClass("instalink-feed-post-video"),i._structure.$feed.append(a)}),d("img",i._structure.$feed).unbind("load.instaLink-"+i._id).one("load.instaLink-"+i._id,function(){var e=d(this);o.setTimeout(function(){e.closest(".instalink-feed-post").addClass("instalink-feed-post-loaded"),i._adjust()},100)}).one("error",function(){var e=this.dataset.pic_orig;d(this).attr("src",e)}).each(function(){this.complete&&d(this).load()}),i._structure.$feedContainer.animate({scrollTop:"+="+i._grid.cellHeight}),!0)},d.fn.instaLink=function(e){var r={};return d.isPlainObject(e)&&d.each(e,function(e,t){var a="data-il-"+e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()});!1===t?t="false":!0===t&&(t="true"),r[a]=t}),this.each(function(e,t){d(t).attr(r),i.init(a++,t).run()}),this},function(){if(!(d&&d.fn&&d.fn.jquery))return;d(e)}()}(jQuery,window,void 0);